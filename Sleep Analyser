import csv
import matplotlib.pyplot as plt


# 1. Load CSV Data
dates = []
sleep_hours = []

with open("sleep_data.csv", "r") as file:
    reader = csv.reader(file)
    next(reader)  

    for row in reader:
        if len(row) < 4:
            continue   

        dates.append(row[0].strip())
        sleep_hours.append(float(row[3]))
# 2. Basic Analysis

total_days = len(sleep_hours)
average_sleep = sum(sleep_hours) / total_days
best_sleep = max(sleep_hours)
worst_sleep = min(sleep_hours)

best_index = sleep_hours.index(best_sleep)
worst_index = sleep_hours.index(worst_sleep)

print("Days analysed:", total_days)
print("Average sleep:", round(average_sleep, 2), "hours")
print("Best sleep:", best_sleep, "hours on", dates[best_index])
print("Worst sleep:", worst_sleep, "hours on", dates[worst_index])

# Irregular days (< 6 hours)
irregular = sum(1 for h in sleep_hours if h < 6)
print("Irregular sleep days (<6 hours):", irregular)

# 3. Sleep Recommendations (Average Sleep)

print("\nSleep Recommendation (Based on Average Sleep):")

if average_sleep < 6:
    print(" Poor sleep pattern detected.")
    print("- Try to sleep at least 7–8 hours daily")
    print("- Avoid mobile usage before bedtime")
    print("- Maintain a fixed sleep schedule")

elif average_sleep < 7.5:
    print(" Average sleep pattern.")
    print("- Try to increase sleep by 30–60 minutes")
    print("- Go to bed slightly earlier")

else:
    print(" Good sleep pattern detected!")
    print("- Keep maintaining your current routine")
    print("- Stay consistent with sleep timings")



# 4. Sleep Consistency Check

print("\nSleep Consistency Check:")

if irregular == 0:
    print(" No irregular sleep days. Very consistent sleep!")

elif irregular <= 2:
    print(" Few irregular sleep days.")
    print("- Try to avoid late nights occasionally")

else:
    print(" Many irregular sleep days detected.")
    print("- Try to maintain regular sleep timings")
    print("- Reduce late-night activities")
